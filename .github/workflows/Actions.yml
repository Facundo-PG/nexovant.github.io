# Nombre del Workflow
name: Deploy Vue site to Pages
# ... [otras secciones] ...
jobs:
  build:
    runs-on: ubuntu-latest
    
    defaults:
      run:
        working-directory: NexoVant
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20
        cache: 'npm'
        # === CORRECCIÓN: La ruta es ahora relativa a 'NexoVant' ===
        cache-dependency-path: package-lock.json 
      
    - name: Install dependencies
      run: npm install
      
    - name: Build project
      run: npm run build
      
    - name: Upload production artifact
      uses: actions/upload-pages-artifact@v3
      with:
        # CORRECCIÓN: La ruta es ahora relativa a la raíz del repositorio
        # donde se ejecutó el build (NexoVant/dist). 
        # Pero si el working-directory está seteado, la ruta del artefacto 
        # debe ser absoluta o ajustarse, por seguridad volvemos a la ruta completa:
        path: NexoVant/dist 
        
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
    - name: Deploy to GitHub Pages
      id: deployment
      uses: actions/deploy-pages@v4